(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93696,e=>{"use strict";e.s(["default",()=>u]);var r=e.i(18050),t=e.i(71645),o=e.i(18566),a=e.i(2573),l=e.i(16015),s=e.i(82750);function n(){let[e,n]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[c,i]=(0,t.useState)(!1),[b,g]=(0,t.useState)(""),h=(0,o.useRouter)(),v=(0,o.useSearchParams)(),{user:x,loading:f}=(0,l.useAuth)();(0,t.useEffect)(()=>{f||x?x&&!(0,s.canUserEdit)(x.email)&&g("You don't have permission to create notes."):h.push("/signin")},[f,x,h]),(0,t.useEffect)(()=>{let e=v.get("title");e&&n(e)},[v]);let m=async()=>{i(!0),g("");try{if(!x)return;let r=await (0,a.createNote)({title:e,content:u,createdBy:x.uid,visibility:"party"});h.push("/notes/".concat(r))}catch(e){g(e instanceof Error?e.message:"Unknown error")}finally{i(!1)}};return(0,r.jsxs)("div",{className:"max-w-xl mx-auto p-8 rounded shadow mt-8",style:{backgroundColor:"var(--surface)",color:"var(--foreground)"},children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",style:{color:"var(--foreground)"},children:"Create a New Note"}),(0,r.jsx)("input",{type:"text",placeholder:"Title",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border rounded mb-4",style:{backgroundColor:"var(--background)",color:"var(--foreground)",borderColor:"var(--border)"}}),(0,r.jsx)("textarea",{placeholder:"Content",value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded mb-4",style:{backgroundColor:"var(--background)",color:"var(--foreground)",borderColor:"var(--border)"},rows:6}),(0,r.jsx)("button",{onClick:m,className:"py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:c||f||!x||!e,children:c?"Creating...":"Create Note"}),b&&(0,r.jsx)("div",{className:"text-red-500 mt-2",children:b})]})}function u(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(n,{})})}}]);